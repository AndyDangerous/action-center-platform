language: ruby
rvm:
- 2.1.2
services:
- postgresql
cache: bundler
bundler_args: "--without development debug"
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
- bundle exec rake db:migrate
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sleep 3
before_install:
- gem update bundler
- cp config/application.yml.example config/application.yml
addons:
  postgresql: '9.3'
  code_climate:
    repo_token: 2aadcb3ef4331fb4104282fd5358f9f5cb01279a76ef07e44e461631d8ddfc7a
env:
  matrix: 
  global:
  - db_adapter=postgresql
  - db_database=travis_ci_test
  - db_username=postgres
  - db_encoding=utf8
  - cors_allowed_domains="https://standagainstspying.org https://www.standagainstspying.org
    http://localhost:8080 http://nobitcoinlicense.org https://nobitcoinlicense.org"
  - call_tool_url='https://call.eff.org/call/create'
  - call_tool_api_key=''
  - congress_forms_url='https://congressforms.eff.org'
  - storage='s3'
  - twitter_handle='eff'
  - twitter_related='eff efflive'
  - facebook_handle='eff'
  - amazon_region=us-west-1
  - amazon_bucket=actioncenter-staging
  - secret_key_base=0a146fe6f02dcf907a162e81209cd148684ddcb447786d6aa5b5ef691a14240ecc5c0f74ef89e3f784cdfc04868197da8a5b606632b9307564f302048162cf1a
  - devise_secret_key=0a146fe6f02dcf907a162e81209cd148684ddcb447786d6aa5b5ef691a14240ecc5c0f74ef89e3f784cdfc04868197da8a5b606632b9307564f302048162cf1a
  - time_zone='Pacific Time (US & Canada)'
  - secure: QA5YlF1gmGnPC5gJG7RvwV84Wgl2TRMVd6wEXtDak88+4gRPTqGWa2quWBX8asJSxWPA2f51ypGvM5HbPL0EVD9aB3bCBlVIGezBzhPBmk97tDaaV3Pnul4l1wt76ZAdslkMn96JlkAM68SX0iShgJMq0z5dB0flBpJPd0bfsYmaeDUYONNGYgM9ZaQTbaTBiueaExfUasCIYCEE9zzLL/Auu9JyMooeBSJjZe5qIqXcoJ+JWZSTSH7pdg58UBMO5Q/6HX2BCC+83woCEF4RefLFu0poxf1BDDQy7chQkex5bWqM/fs+wzVJoYd5QmHpQw0p5dwfJu24a3UcJSVna1d7NeRsr3dqa7QCLciBn28N3Mk1KzvbQBcEHH7bxy3gHAeOfMfPOCr2DOg2WkmE/4Tn+cXg/mQNwR6gsjqnH0EfmC6/DnDYiwgDNeabJxrz0dQAxxTagXRm2IyDlyclmy3SPng+xnU6tm/lu8Wcg74fgvb7/iWsWh40UE7kCZ87w8uWaOHit0L5Zj3lsY9dOAqUru+Y/qN5yHYa+5C5nj/W7Wn9SAE62RNTveuR9RtQG8Q4tbJiv/yzdw7y66+vinDaXV0jB++3/8sDNXwbiSamhI8vHIJQBm3rrMGAYqSDADGf8X1VG6+8AiiC0hFx7RUa+yE03newxrkwRSRwwPM=
  - secure: gY5y18cDNd2+DYoqnnr8PBYKZHyfl2diPHTjJL+2KXT9oM4p2nrj8gjgQIsqozhMCbSMpDkR88heQRJ5/sx+uuEbTdC7wO8bQRGQY4dzqRvzZGlUnu5lkflJjFF/0bfSsM4q9C2cJ8/qHWcw7imGiNM4iOGIiP83t61+o25zaRv7kjVb2VddNlfpGaq+j4843Vhzcc2ccXakL1qnpaJuJcGCslK0ouj/jWfPxadZZllzdZ590ZeMB28cFIiQ/mEJGHzZUscEk7M19yuRuZLV/O+LytmZ7cEercFlYgOQ0sogr7osMCF+an2Gg2N+SVSRqYHWghQ0pC2KJZQM31w/jKRK96jYQYpdc8g52Q8NeT9EwAoFlUYFBrv0ThOWxhj03SDDrqi1Y562a2ED/w4a1Kf4hty0DSAdY2YSA9mhd2ERgjVodtxwfQWZXLIOaCKS+6c5WexsVIiYtBnlaeubltsjGc6q1Q1v63bUnB2eaouPjWd1vwkkneffN0KuhiABuHMV1JG14MBaA4H1p/KxyF7u0tjA40eTHddrWsc4rHPaEHY3ZsP/8MJICa+wM3xc75eixXPDmamcaFscmz9midlK0IBOk7m6Ycbs3IjT26l/cqvdOC2SJ7r9LRyZChXbg5lavEz9vLY/ZrGSQAfjwtjZ4jBJAH1saVdW7bc7jxs=
  - secure: L7aiWQedUI75bWWp55lOgdNurgTtdrbsiOtcMdNwnL5Xz+4EClxYz9FRbwc7smyD01RlyUesdS/yDwxPdZOvvisjl/sTJYNlDK0pd/MXujBrj9m3YQJS1zwrUvG+73VoDhrUyouNd/qMAre7nQnO1Rccjrp340tdFUfZZ7IMH2Fg4FdAsMe4kJaqRZKwyQYhm7AHuG+OlnRqsuQGNEpFh+R9PBfBI5B0J/wNy8s9cT8K1xDNnUPT6Y0F/hTO353t76D4jtPEeSG611o1R9/BYRdYy8Tp66HuSZWmfEiFH8roxHDBZcrIFEgMp0wgVbVJjeKTf5ZtizAuN10MM2jCN4LBkvErO5wrjoNwYab5zpwhYgtj4EWygiqypGl5lUBgsrdkP7p4lvmiSNWEwy0o6wReh+55aYILThs2yuCHsIRMltMYfTIf6wf+iLo1ubK2dx4H+aF2sdyJlPIeFMLdbvm8JqWOT4taHVogQOr1cXEgbx1YuLtQD/NIB5t4eKLxf7ASCmg+47tGcDpH9OP8x1VtlVddMVt0KisBAdvXYlhpSbD/lpzewwkpbJ9qq+U/uQlZbtZnOGve6KABfuDDnmpmuzKOAe3CO4aWtf6DrxjUH6pi7CH4dgyS/GhIohMWGDddldBQV/xpRK6OKUHDlAVlei3FR1yq4l3Q65qX/bI=
  - secure: Tr4x6ENGyfBz/LqaPPTcbuoG8lFflmuGY8NFH8P4K2pqpnbFbxXldt0sOQXXmT+3ylMWtWiEO0REB7tCKQWULF0O9Fi5St4uVsgKc4+Fu612aoGmqK1z2KtoQy5QkO9gYQh35f8u0JOTQm21cwp/ccE83uxrKv7uROHvnSXyFtl7aCG9WwResuwPtMqO5UgGmKiD5fO7kOmviRONgiqAvkUQs0StZtGEunip+XmAMW26YFMYuMWyO7pfqD7vHwQpk3b8Rx7815ntpywWFw2UhIgITg0WAhVpvbLLTZNCoIwKPKmCEVOvjby8Cmuot/2xQ33oh03MvHUWejI7gp4MZeJz8v7QvYd+/rsrv2Sgd0a1xGhXZb0ltW4n2cmzkZpXf1p110hbnMIK5adVnL5ipCdRPdcrFX/x6obgQM4CJl/kB4WA5OjUc00ImIkeQrnLxeE6pr2LkicFchWxXxMgWcZ714uoAaiz36052dQ0Qdg0l4zw+KraPJCbD9We97CkWMgP3ZusEXhBsKY9au2gdfvDEr9CKxXLDcC+JZBxIVBvvu99gLrMm2FxryxybdEL5Y50U1jBRJAROdQt2E0/HV74rIaCOMQir62xi9lD2tmgeY3h/lo4AZbM8TnLS5PeTu4wjulZoPHohfzFJQTLmbja7tE+oSiZbBh1HGOvaaU=
  - secure: k+Bf467dGkEYWOPLk7OtSlzQKa7BwHm9//cZ+hni+3MwOqkXQrlSyVvd0qmLUWo+Rz6YxXnI0cJhJqaquRlok+g86juV8hwd0PDsC4XDr1rmV4rE9m993/OAdlJX8jRRxyPfN79b9OUEe3D3/GnlpCTi1ZcDwOzJOxXjENFDiW/sGlv521BcnKrosc6W8+X/ufAhi/vtHlIjmtRsITHPnwqTraBA2WeismbF29WR7GVT97woyrA9iKFYfUNmTjrRyt2eYEEJ06+lfUkkAwgf6XJrqAv9q/rgr7L0D+b5Qt8wcgNQOlt4XPKy6Aar+fVhKgPG8soClBVGOfFWS3Byal6N2HpqLdO9eLPgubnsHaNZDnrQkdFOLnvEkq7zs4GIfSLyOyCrvmognq+dWcQeY7+g1cOMvF/YNdHk3PmfVOEyz1KgId0Lx5PFKP2WodJnGt5+DZCkxst8cMo+jfwdxIDnBoX8VaZhgvUqXvua5BA4tB+ZdoywMnaHd2zXFHPCLlo5M8myoXXoxySYXMEZ91kJcuZ+xLnv46luubaM9CQXn+Qz7lutdvnv54b1ZjYD1HAo/+t6NOeAJQIIxQGpVuWDbJJxAYDCmz734Dh5Wt0WQLB0M5H0goXhRNkJD2JZmjEJwEvbA2mdz0jmRtk9hOElwn9Pjk6OQTQ3zBCSvRk=
  - secure: J8qDw0ii1QFfZGoeTk+b374MLbG1HB3qao0gh3hsSZ6X1+3SHJUU7YvOuZuElxxnKDA1nZzfGLYJbP8fxPdk1Pi3Nm7QWfZ0dSkQSH9FeHqAgksun/m7rYR94l/BaI3NqHjBgCYo/r5GxrvT71euVSNkNzro87DEIOrY2sx1sO+HDLIHNW6guu2ebGL7BeeMsw+rEK73X2sNPMufN6vaZmIW07RaM3lReAyHWWm5DsXPVAS5mqC5ePgZGRTVjisobC2Dxksb0Tv1WKKalqY13a/6V9nBLWFaCLK6Lf9Qdz35jH0CXTr4PBQs5TEJEgrMFMBdjw7RGYORk8AUfkcad7EzQ++SYU3WYfAp6S+5tjJA0zi5anfz8/KDHdUg9mKqZaQ3aqD1MVJmm9/Q3rXVRQAaw0rMtPO7qLuXuzprg4mP0Qn2WCEeUE7ysAdBcHJZ/ep2jj/Sy9Ls2XcDcVeM3AvqpW1y7b2Defsuezu+AK7A8lnZ/ckxmSxDO/jkT/P380EkSgtcvFdnYAp3Ayebu2O0VeIWBY+aYuXtzShU1wk/HJIJ6qw8EH31dD4+6MvG0DAgzQUlP8Y8iqVVrbmIiWjq2NgINC0wGN8ofwDkIllvl6Na/uJYOgWsb2ZC8eX1Y4pLG7V5o6toMw8mO2K1/i2giVPAYvUagZeOaeXs2Jo=
  - secure: VEWKhzCVB9DaS8YkcAvz+BeGAr5GVnhEVccDc9DyPNtlLezR8t22WG+EdsXkQgJIJ4ceduyUzcRZLdqePli86yRd8RmiOtXpkK01MmQwYOzeaTbZKezr8oxqkfesLs7Y9SZ9pSPMuuJzyPixr6vmDKNgw6jeOwkbuEoZD2/iTIvPUBZsnKPc4CHveIqgYjNdak8d/AV2vibiKixCtyLwcFc5EOwLipcRlf0lGNjRsQmxgmckdh1ZS4WEoU2kvrgWXlPn5dUSsusl7tzqP4Jxty05AUI4aAz3/hdJU7LGY1aUWy/uqpaydSRY6BwFSYS9DSKLpozT8mTwLtMMYWP0GEfm/7q1AOA/InkHUkjDvhC4nnsv5dhUQFX2xo0zsXSA96ZsCeexAupup62r6plkdsqT652BZSIsGXXkGPmQUPFO6TOYO0F5nZyPogtxgHcmxhHHkP3uqRyq3uQUgHgKuu8Z5NfQOracbazYVxaFTPG7bW4eW9bR/Kl8D2ZV8Q50cuqZf5D6psYivEwzsa71aMA6RWL7oD2F0CYUtrLU2mWUF8hf5OHfVxEfiJGQ5o1wFr55pyLvD7iAKOK/zZ5sMLPHL5dS81sC/DTb7yMtDW0gig4VUFcVVhVuVZLnRhQdkBe3x16NBqDGZrZ5OeUCf8tqhyx3l65LuM06oOiKahQ=
  - secure: TBAg/g+7o1/n2DCTjn+VNWtTiSfmNwP2Nb/8U4LgYjmJSD5L6l0TNgZ/pBFAujqaw58Z/eTEz4E4oHWXJIFwRI5koG8VhUKupWTQfhkVTh0FENOOZcj5KlJuAMqwb0YfMSTQOQmgzYO5nbU4ovur0VGO1nOj+cGbZmgAqIf+D7BQgaQjMXLkNt11mXDe+SZOWhVA9lq7ImEjWZ70HR/5GA+sPQWbpIMIcOA9cZRjetIQ92ISKT3psZVSImGZUPt7SfLvluLmVqh3liMmcY5dF1GnHqjMJn1HZnW8jHkfJqR8uuDSpx2v0BFh2w0ssq4EoRZfngudIbFElALV2nBLEYMarF5iPLHXt+FyWvxyK/hmagt5db/YXRfD4ZbB0q8VJ2dqvDd2YVJSEhmEAssRdEHFWsrjKY7e7PDrb12jo5ykNsFfF2CI6zCa3k9gyZOktkCs/9Xzt5z5xQ51EDaAnYuXzCAjf+AFxDbgKqQ7O2a/fLY9SFGmgpGWT4vtejPVQt47h1K1CJ70XNWBR4M5B+/NIpfobeIkQ2P7S9SJcFKYg+1gnyOFF0N8HgDJtLSVwSBbyJZqDXtW9kixm2tGJHqHxC32vmHzSzroboAMD+0DGm3aIsxlMyeb6Gr/bjGJNv4uOikmlF7MNeHaSL5KekzoJtt51+/BvWINGcL/aNw=
